## 目录

* [背景介绍](#背景介绍)

* [项目介绍](# 项目介绍)

* [表结构设计](#表结构设计)

  * [配置信息表](#配置信息表)

  * [消费分类表](#消费分类表)

  * [消费记录表](#消费记录表)

* [表关系](#表关系)

* [参考文献](#参考文献)

  ​

<a name="背景介绍"></a>

##背景介绍

*hubill*  是一个练习的记事本，由于*SWING*的学习太枯燥，本着项目驱动学习的方法，故选用*hubill*作为练习的项目学习。学习参考网址[how2j](http://how2j.cn/)

<a name="项目介绍"></a>

##项目介绍

作为一个基于*SWING*的记账本，*hubill*主要有以下一些功能：

1. 消费一览

   统计本月的消费总数，今日消费，日均消费，本月剩余，日均可用，距离月末有多少天。

   同时使用一个环形进度条，这个环形进度条不是JDK自带的，需要自己设计，并且随着消费用度，颜色从绿色渐变为红色。

   ​

2. 记一笔

   记录本日的消费额度， 分类下拉框从 消费分类数据中读取，并且把经常消费的分类放在前面。

   日期默认选中今天，也可以手动指定日期。

   ​

3. 消费分类管理

   对消费进行经典的CRUD 增删改查管理，同时显示一个分类下的消费次数。
   这里涉及到多表关系：

   消费记录和消费分类是多对一关系。

   ​

4. 月度消费报表

   使用第三方chart类生成柱状报表，显示本月的消费趋势。

   ​

5. 设置预算和数据库路径

   在消费一览中需要显示本月可能多少金额，都是建立在预算的基础上的。

   在设置页面，设置本月的预算金额。

   后续的还原和备份，都需要用到数据库的命令mysql和mysqldump，需要在这里配置mysql的安装目录

   ​

6. 备份数据

   把数据库中的所有数据，备份到.sql文件中

   ​

7. 恢复数据

   根据.sql文件还原数据库

   ​

   <a name="表结构设计"></a>

   ​

## 表结构设计

   根据对所描述功能的分析，“一本糊涂账”需要三张表，分别是：

   * [配置信息表](#配置信息表)

     用于保存每月预算和Mysql的安装路径( 用于备份还原用)

   * [消费分类表](#消费分类表)

     用于保存消费分类，比如餐饮，交通，住宿

   * [消费记录表](#消费记录表)

     用于存放每一笔的消费记录，并且会用到消费分类

   下面分别对三张表进行一一介绍

   <a name="配置信息表"></a>

   ###配置信息表

   配置信息表 config有如下字段

   * id 主键，每个表都有一个主键 类型是 int

   * key_ 配置信息按照键值对的形式出现 ，类型是varchar(255)

   * value配置信息的值, 类型是 varchar(255)

     ```mysql
       CREATE TABLE config (
       id int ,
       key_ varchar(255) ,
       value varchar(255) 
     )  ENGINE=InnoDB  DEFAULT CHARSET=utf8;
     ```


<a name="消费分类表"></a>

   ###消费分类表

消费分类表 category 有如下字段

* id 主键，每个表都有一个主键 类型是 int

* name分类的名称，类型是varchar(255)

  ```mysql
  CREATE TABLE category (
    id int,
    name varchar(255) 
  )   ENGINE=InnoDB DEFAULT CHARSET=utf8;
  ```

  <a name="消费记录表"></a>

   ### 消费记录表

  消费记录表 record 有如下字段：

  * id 主键，每个表都有一个主键 类型是 int

  * spend 本次花费，类型是int

  * cid 对应的消费分类表的中记录的id, 类型是int

  * comment 备注，比如分类是娱乐，但是你希望记录更详细的内容，啪啪啪，那么就存放在这里。

  * date 日期，本次记录发生的时间。

    ```mysql
    CREATE TABLE record (
      id int,
      spend int,
      cid int,
      comment varchar(255) ,
      date Date
    )   ENGINE=InnoDB DEFAULT CHARSET=utf8;
    ```

  <a name="表关系"></a>
  ##表关系


  一条记录数据，只能对应一种分类
  比如说这次消费是吃火锅，那么只能对应餐饮，不能同时又对应住宿。
  那么就在分类这边写下符号 一

  一条分类数据，对应多条记录数据
  比如餐饮下，有多次消费记录，火锅，冒菜，盒饭
  那么就在记录这边写下符号 多

  所以分类和记录之间的关系是 一对多，
  又叫ONE TO MANY 1：M


